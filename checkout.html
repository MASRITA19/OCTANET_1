<?php
include 'db.php'; // Include the database connection file

// Define your cart items (replace with your actual cart data)
$cartItems = array(
    array("name" => "Product 1", "price" => 10.00),
    array("name" => "Product 2", "price" => 15.00)
);

// Calculate the total order amount
$totalAmount = 0;
foreach ($cartItems as $item) {
    $totalAmount += $item["price"];
}

if ($_SERVER["REQUEST_METHOD"] == "POST") {
    // Retrieve form data (as before)

    // Insert order into the database (as before)

    if ($con->query($sql) === true) {
        echo "Order placed successfully!";
    } else {
        echo "Error: " . $sql . "<br>" . $con->error;
    }
}
?>

<!DOCTYPE html>
<html>

<head>
    <title>Checkout</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600&display=swap');

        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            outline: none;
            border: none;
            text-decoration: none;
            text-transform: capitalize;
            transition: .2s linear;
            background: #3e4144;
        }
        h1.login-title {
            color: #666;
            margin: 0px auto 25px;
            font-size: 25px;
            font-weight: 300;
            text-align: center;
        }

        form {
            margin: 50px auto;
            width: 300px;
            padding: 30px 25px;
            background: white;
        }

        h2 {
            margin-top: 15px;
        }

        label {
            display: block;
            margin-top: 10px;
        }

        input[type="text"],
        select {
            font-size: 15px;
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 25px;
            height: 25px;
            width: calc(100% - 23px);
        }
        .login-input:focus {
            border-color:#6e8095;
            outline: none;
        }

        button[type="submit"] {
            color: #fff;
            background: #9F5C44;
            border: 0;
            outline: 0;
            width: 100%;
            height: 50px;
            font-size: 16px;
            text-align: center;
            cursor: pointer;
        }

        button[type="submit"]:hover {
            background-color: #64342C;
            letter-spacing: .2rem;
        }

       
        img {
            max-width: 100px;
            max-height: 100px;
        }
    </style>

</head>

<body>
    

    <form action="process_order.php" method="post">
        <!-- Billing Information -->
        <center>
            <img src="../assets/images/pure-logo.png" alt="" class="img img-fluid">
        </center>
        <hr />
        <h1 class="login-title">Checkout</h1>
        <h2>Billing Information</h2>
        
        <input type="text" class="login-input" name="billing_name" placeholder="Full Name" required><br>
        <input type="text" class="login-input" name="billing_address" placeholder="Billing Address" required><br>

        <input type="text" class="login-input" name="billing_city" placeholder="City" required><br>

        <input type="text" class="login-input" name="billing_zipcode" placeholder="ZIP Code" required><br>

        <!-- Shipping Information -->
        <h2>Shipping Information</h2>
        
        <input type="text" class="login-input" name="shipping_name" placeholder="Full Name" required><br>

        
        <input type="text" class="login-input" name="shipping_address" placeholder="Shipping Address" required><br>

        
        <input type="text" class="login-input" name="shipping_city" placeholder="City" required><br>

        
        <input type="text" class="login-input" name="shipping_zipcode" placeholder="ZIP Code" required><br>

        <!-- Payment Method -->
        <h2>Payment Method</h2>
        <label for="payment_method">Select Payment Method:</label>
        <select name="payment_method" required>
            <option value="credit_card">Credit Card</option>
            <option value="paypal">PayPal</option>
            <option value="cod">Cash on Delivery (COD)</option>
        </select><br>

        <!-- Order Summary (You can populate this section with your cart items) -->
       <!-- <h2>Order Summary</h2> --> 
        <!-- Add your cart items here -->
        <!-- Order Summary Section -->
        <div class="order-summary">
            <h2>Order Summary</h2>
            <ul>
                <?php
                // Display cart items dynamically
                foreach ($cartItems as $item) {
                    echo "<li>{$item['name']} - $" . number_format($item['price'], 2) . "</li>";
                }
                ?>
            </ul>
            <p>Total: $<?php echo number_format($totalAmount, 2); ?></p>
        </div>
        <hr>
        <button type="submit">Place Order</button>
    </form>
</body>

</html>